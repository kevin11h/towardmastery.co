{% extends 'base.html.twig' %}

{% trans_default_domain 'messages' %}
{% set lang = app.request.locale %}
{% set other_lang = (lang == 'en' ? 'fr' : 'en') %}

{%block body%}

{% include 'nav.html.twig' %}

<main class="container-fluid">

<div class="row">

<div class="d-none d-md-flex flex-column col-md-2 text-center align-items-center justify-content-center" id="sidebar">
    <button type="button" class="btn btn-primary mb-3" data-toggle="modal" data-target="#modal-email-subscription">
      {{'Subscribe'|trans}} <i class="fas fa-envelope-open text-white"></i>
    </button>

    <ul class="nav flex-row mb-3">
        <li class="nav-item">
            <a class="nav-link text-dark" href="mailto:basile@justinien.co" target="_blank"><span class="fa fa-envelope"></span></a>
        </li>
        <li class="nav-item">
            <a class="nav-link text-dark" href="https://www.linkedin.com/in/basile-samel/" target="_blank"><span class="fab fa-linkedin"></span></a>
        </li>
        <li class="nav-item">
            <a class="nav-link text-dark" href="https://twitter.com/basilesamel" target="_blank"><span class="fab fa-twitter"></span></a>
        </li>
    </ul>

    <p class="text-muted">2018â’¸ <a href="http://basilesamel.com/{{lang}}" target="_blank">Basile Samel</a></p>
</div>

<!-- Article feed -->
<div class="col-12 col-md-10 ml-auto" id="articles">
{% if articles is not empty %}

    {% for article in articles %}

    {% if lang == 'en'%}
        {% set current_article = article.english %}
        {% set date_article = article.date|localizeddate('none', 'none', null, null, "MMM d") %}
    {% else %}
        {% set current_article = article.french %}
        {% set date_article = article.date|localizeddate('none', 'none', null, null, "d MMM") %}
    {% endif %}


    <a href="/{{lang}}/article/{{current_article.slug}}" style="background-image:url({{asset(article_img_directory ~ article.cover)}});" class="article-wrapper">
    <article class="jumbotron jumbotron-fluid d-flex align-items-center">
      <div class="container text-center">
        <h3 class="display-4">{{current_article.title}}</h3><span class="text-white">{{date_article}}</span>
      </div>
    </article>
    </a>

    {% endfor %}

    <p class="text-center display-4 text-muted mt-5">{{ 'That\'s all for now'|trans|raw }} <a href="#"><i class="fas fa-chevron-circle-up text-muted"></i></a></p>

{% else %}
  <p class="text-center display-4 text-muted">{{ 'article-noarticles'|trans|raw }}</p>
{% endif %}

</div>

</div>
</main>


{% include 'modal_email_subscription.html.twig' %}

{%endblock%}

{%block javascript%}
<script src="{{ asset('build/landing.js') }}"></script>
{%endblock%}
